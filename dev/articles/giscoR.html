<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Get started with giscoR • giscoR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get started with giscoR">
<meta name="robots" content="noindex">
<!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-VGVFXGHWRL"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-VGVFXGHWRL');
</script><link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=B612+Mono:ital,wght@0,400;0,700;1,400;1,700&amp;family=Fira+Code:wght@300..700&amp;display=swap" rel="stylesheet">
<!-- rogtemplate style sheet --><link href="../BS5/rogtemplate.min.css" rel="stylesheet">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">giscoR</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.9.9.9999</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/giscoR.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rOpenGov/giscoR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get started with giscoR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/rOpenGov/giscoR/blob/main/vignettes/giscoR.Rmd" class="external-link"><code>vignettes/giscoR.Rmd</code></a></small>
      <div class="d-none name"><code>giscoR.Rmd</code></div>
    </div>

    
    
<!-- giscoR.Rmd is generated from giscoR.Rmd.orig. Please edit that file -->
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p><em>Full site with more examples and vignettes on <a href="https://ropengov.github.io/giscoR/" class="uri">https://ropengov.github.io/giscoR/</a></em></p>
<p><a href="https://ropengov.github.io/giscoR/"><strong>giscoR</strong></a> is
a package designed to provide a simple interface to the <a href="https://gisco-services.ec.europa.eu/distribution/v2/" class="external-link">GISCO
API</a>.</p>
<p>Within Eurostat, GISCO meets the European Commission’s geographical
information needs at three levels: the European Union, its member
countries, and its regions. GISCO provides shapefiles in different
formats, focusing especially on the European Union but also offering
some worldwide datasets such as country polygons, labels, borders, and
coastlines.</p>
<p>GISCO supplies data at multiple resolutions: high-detail datasets for
small areas (01M, 03M) and lightweight datasets for larger areas (10M,
20M, 60M). Datasets are available in three projections: <a href="https://epsg.io/4326" class="external-link">EPSG:4326</a>, <a href="https://epsg.io/3035" class="external-link">EPSG:3035</a>, and <a href="https://epsg.io/3857" class="external-link">EPSG:3857</a>.</p>
<p><strong>giscoR</strong> returns <a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link"><code>sf</code></a>
objects; see <a href="https://r-spatial.github.io/sf/" class="external-link uri">https://r-spatial.github.io/sf/</a> for details.</p>
</div>
<div class="section level2">
<h2 id="caching">Caching<a class="anchor" aria-label="anchor" href="#caching"></a>
</h2>
<p><strong>giscoR</strong> supports caching of downloaded datasets. Set
the cache directory with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/gisco_set_cache_dir.html">gisco_set_cache_dir</a></span><span class="op">(</span><span class="st">"./path/to/location"</span><span class="op">)</span></span></code></pre></div>
<p>If a file is not available locally, it will be downloaded to that
directory so subsequent requests for the same data will load from the
local cache.</p>
<p>If you experience any problems downloading, you can also manually
download the file from the <a href="https://gisco-services.ec.europa.eu/distribution/v2/" class="external-link">GISCO API
website</a> and store it in your local cache directory.</p>
</div>
<div class="section level2">
<h2 id="downloading-data">Downloading data<a class="anchor" aria-label="anchor" href="#downloading-data"></a>
</h2>
<p>Please note the following attribution and licensing requirements when
using GISCO data:</p>
<blockquote>
<p><a href="https://ec.europa.eu/eurostat/web/main/help/copyright-notice" class="external-link">Eurostat’s
general copyright notice and licence policy</a> applies. Moreover, there
are specific rules that apply to some of the following datasets
available for downloading. The download and use of these data are
subject to these rules being accepted. See our <a href="https://ec.europa.eu/eurostat/web/gisco/geodata/administrative-units" class="external-link">administrative
units</a> and <a href="https://ec.europa.eu/eurostat/web/gisco/geodata/statistical-units" class="external-link">statistical
units</a> for more details.</p>
<p>Source: <a href="https://ec.europa.eu/eurostat/web/gisco/geodata" class="external-link uri">https://ec.europa.eu/eurostat/web/gisco/geodata</a></p>
</blockquote>
<p>There is a function, <code><a href="../reference/gisco_attributions.html">gisco_attributions()</a></code>, that provides
guidance on this topic and returns attributions in several
languages.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ropengov.github.io/giscoR/">giscoR</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/gisco_attributions.html">gisco_attributions</a></span><span class="op">(</span>lang <span class="op">=</span> <span class="st">"en"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/gisco_attributions.html">gisco_attributions</a></span><span class="op">(</span>lang <span class="op">=</span> <span class="st">"fr"</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="../reference/gisco_attributions.html">gisco_attributions</a></span><span class="op">(</span>lang <span class="op">=</span> <span class="st">"de"</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span>sep <span class="op">=</span> <span class="st">"\n\n"</span><span class="op">)</span></span>
<span><span class="co">#&gt; © EuroGeographics for the administrative boundaries</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; © EuroGeographics pour les limites administratives</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; © EuroGeographics bezüglich der Verwaltungsgrenzen</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-example">Basic example<a class="anchor" aria-label="anchor" href="#basic-example"></a>
</h2>
<p>Examples of downloading data: Plot of Asia as per <a href="https://unstats.un.org/unsd/methodology/m49/" class="external-link">UN M49
Standard</a>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span> <span class="co"># Use ggplot for plotting</span></span>
<span></span>
<span><span class="va">asia</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gisco_get_countries.html">gisco_get_countries</a></span><span class="op">(</span>region <span class="op">=</span> <span class="st">"Asia"</span><span class="op">)</span></span>
<span><span class="va">world</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gisco_get_countries.html">gisco_get_countries</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">world</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"#DFDFDF"</span>, color <span class="op">=</span> <span class="st">"#656565"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">asia</span>, fill <span class="op">=</span> <span class="st">"#FDFBEA"</span>, color <span class="op">=</span> <span class="st">"#656565"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>crs <span class="op">=</span> <span class="st">"+proj=laea +lon_0=95 +lat_0=35"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/lims.html" class="external-link">lims</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">5500000</span>, <span class="fl">5500000</span><span class="op">)</span>,</span>
<span>    y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4500000</span>, <span class="fl">2500000</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="st">"#C7E7FB"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Asia"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"UN M49 Standard"</span>,</span>
<span>    caption <span class="op">=</span> <span class="fu"><a href="../reference/gisco_attributions.html">gisco_attributions</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="country-1.png" alt="Political map of Asia (UN M49)" width="100%"><p class="caption">
Political map of Asia (UN M49)
</p>
</div>
<p>You can select specific countries by name (in any language), ISO3
codes, or Eurostat codes. However, you cannot mix these identifier types
in a single call.</p>
<p>You can also combine different datasets — set <code>resolution</code>
and <code>epsg</code> (and optionally <code>year</code>) to the same
value:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cntr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Morocco"</span>, <span class="st">"Algeria"</span>, <span class="st">"Tunisia"</span>, <span class="st">"Libya"</span>, <span class="st">"Egypt"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">africa_north</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gisco_get_countries.html">gisco_get_countries</a></span><span class="op">(</span></span>
<span>  country <span class="op">=</span> <span class="va">cntr</span>,</span>
<span>  resolution <span class="op">=</span> <span class="st">"03"</span>,</span>
<span>  epsg <span class="op">=</span> <span class="st">"4326"</span>, year <span class="op">=</span> <span class="st">"2024"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For ordering the plot</span></span>
<span></span>
<span><span class="va">africa_north</span><span class="op">$</span><span class="va">NAME_ENGL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">africa_north</span><span class="op">$</span><span class="va">NAME_ENGL</span>, levels <span class="op">=</span> <span class="va">cntr</span><span class="op">)</span></span>
<span><span class="co"># Coastlines</span></span>
<span></span>
<span><span class="va">coast</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/gisco_get_coastal_lines.html">gisco_get_coastal_lines</a></span><span class="op">(</span></span>
<span>  resolution <span class="op">=</span> <span class="st">"03"</span>,</span>
<span>  epsg <span class="op">=</span> <span class="st">"4326"</span>,</span>
<span>  year <span class="op">=</span> <span class="st">"2016"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">coast</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"#B9B9B9"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">africa_north</span>, fill <span class="op">=</span> <span class="st">"#346733"</span>, color <span class="op">=</span> <span class="st">"#335033"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">13</span>, <span class="fl">37</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18.5</span>, <span class="fl">40</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">NAME_ENGL</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="fu"><a href="../reference/gisco_attributions.html">gisco_attributions</a></span><span class="op">(</span><span class="st">"fr"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="africa-1.png" alt="Political map of North Africa" width="100%"><p class="caption">
Political map of North Africa
</p>
</div>
</div>
<div class="section level2">
<h2 id="thematic-maps-with-giscor">Thematic maps with <strong>giscoR</strong><a class="anchor" aria-label="anchor" href="#thematic-maps-with-giscor"></a>
</h2>
<p>This example shows how <strong>giscoR</strong> can be used together
with Eurostat data. For plotting we use <strong>ggplot2</strong>;
however, any package that supports <code>sf</code> objects (e.g.,
<strong>tmap</strong>, <strong>mapsf</strong>, <strong>leaflet</strong>)
can be used.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># EU members</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">library</span>(giscoR)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="fu">library</span>(eurostat)</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>nuts2 <span class="ot">&lt;-</span> <span class="fu">gisco_get_nuts</span>(</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>  <span class="at">year =</span> <span class="st">"2021"</span>, <span class="at">epsg =</span> <span class="st">"3035"</span>, <span class="at">resolution =</span> <span class="st">"10"</span>,</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>  <span class="at">nuts_level =</span> <span class="st">"2"</span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a>)</span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co"># Borders from countries</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a>borders <span class="ot">&lt;-</span> <span class="fu">gisco_get_countries</span>(<span class="at">epsg =</span> <span class="st">"3035"</span>, <span class="at">year =</span> <span class="st">"2020"</span>, <span class="at">resolution =</span> <span class="st">"3"</span>)</span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a>eu_bord <span class="ot">&lt;-</span> borders <span class="sc">|&gt;</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a>  <span class="fu">filter</span>(CNTR_ID <span class="sc">%in%</span> nuts2<span class="sc">$</span>CNTR_CODE)</span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="co"># Eurostat data - Disposable income</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a>pps <span class="ot">&lt;-</span> <span class="fu">get_eurostat</span>(<span class="st">"tgs00026"</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a>  <span class="fu">filter</span>(TIME_PERIOD <span class="sc">==</span> <span class="st">"2022-01-01"</span>)</span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a>indexed <span class="dv">0</span>B <span class="cf">in</span>  <span class="dv">0</span>s, <span class="dv">0</span>B<span class="sc">/</span>s</span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a>indexed <span class="fl">2.15</span>GB <span class="cf">in</span>  <span class="dv">0</span>s, <span class="fl">2.15</span>GB<span class="sc">/</span>s</span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a>                                                                                            </span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a></span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a>nuts2_sf <span class="ot">&lt;-</span> nuts2 <span class="sc">|&gt;</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a>  <span class="fu">left_join</span>(pps, <span class="at">by =</span> <span class="st">"geo"</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-27"><a href="#cb5-27" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-28"><a href="#cb5-28" tabindex="-1"></a>    <span class="at">values_th =</span> values <span class="sc">/</span> <span class="dv">1000</span>,</span>
<span id="cb5-29"><a href="#cb5-29" tabindex="-1"></a>    <span class="at">categ =</span> <span class="fu">cut</span>(values_th, <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">15</span>, <span class="dv">30</span>, <span class="dv">60</span>, <span class="dv">90</span>, <span class="dv">120</span>, <span class="cn">Inf</span>))</span>
<span id="cb5-30"><a href="#cb5-30" tabindex="-1"></a>  )</span>
<span id="cb5-31"><a href="#cb5-31" tabindex="-1"></a></span>
<span id="cb5-32"><a href="#cb5-32" tabindex="-1"></a></span>
<span id="cb5-33"><a href="#cb5-33" tabindex="-1"></a><span class="co"># Adjust the labels</span></span>
<span id="cb5-34"><a href="#cb5-34" tabindex="-1"></a>labs <span class="ot">&lt;-</span> <span class="fu">levels</span>(nuts2_sf<span class="sc">$</span>categ)</span>
<span id="cb5-35"><a href="#cb5-35" tabindex="-1"></a>labs[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">"&lt; 15"</span></span>
<span id="cb5-36"><a href="#cb5-36" tabindex="-1"></a>labs[<span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="st">"&gt; 120"</span></span>
<span id="cb5-37"><a href="#cb5-37" tabindex="-1"></a><span class="fu">levels</span>(nuts2_sf<span class="sc">$</span>categ) <span class="ot">&lt;-</span> labs</span>
<span id="cb5-38"><a href="#cb5-38" tabindex="-1"></a></span>
<span id="cb5-39"><a href="#cb5-39" tabindex="-1"></a></span>
<span id="cb5-40"><a href="#cb5-40" tabindex="-1"></a><span class="co"># Finally the plot</span></span>
<span id="cb5-41"><a href="#cb5-41" tabindex="-1"></a><span class="fu">ggplot</span>(nuts2_sf) <span class="sc">+</span></span>
<span id="cb5-42"><a href="#cb5-42" tabindex="-1"></a>  <span class="co"># Background</span></span>
<span id="cb5-43"><a href="#cb5-43" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> borders, <span class="at">fill =</span> <span class="st">"#e1e1e1"</span>, <span class="at">color =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<span id="cb5-44"><a href="#cb5-44" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> categ), <span class="at">color =</span> <span class="st">"grey20"</span>, <span class="at">linewidth =</span> .<span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb5-45"><a href="#cb5-45" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> eu_bord, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">linewidth =</span> .<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb5-46"><a href="#cb5-46" tabindex="-1"></a>  <span class="co"># Center in Europe: EPSG 3035</span></span>
<span id="cb5-47"><a href="#cb5-47" tabindex="-1"></a>  <span class="fu">coord_sf</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">2377294</span>, <span class="dv">6500000</span>), <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">1413597</span>, <span class="dv">5228510</span>)) <span class="sc">+</span></span>
<span id="cb5-48"><a href="#cb5-48" tabindex="-1"></a>  <span class="co"># Legends and color</span></span>
<span id="cb5-49"><a href="#cb5-49" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb5-50"><a href="#cb5-50" tabindex="-1"></a>    <span class="at">values =</span> <span class="fu">hcl.colors</span>(<span class="fu">length</span>(labs), <span class="st">"Geyser"</span>, <span class="at">rev =</span> <span class="cn">TRUE</span>),</span>
<span id="cb5-51"><a href="#cb5-51" tabindex="-1"></a>    <span class="co"># Label NA</span></span>
<span id="cb5-52"><a href="#cb5-52" tabindex="-1"></a>    <span class="at">labels =</span> <span class="cf">function</span>(x) {</span>
<span id="cb5-53"><a href="#cb5-53" tabindex="-1"></a>      <span class="fu">ifelse</span>(<span class="fu">is.na</span>(x), <span class="st">"No Data"</span>, x)</span>
<span id="cb5-54"><a href="#cb5-54" tabindex="-1"></a>    },</span>
<span id="cb5-55"><a href="#cb5-55" tabindex="-1"></a>    <span class="at">na.value =</span> <span class="st">"#e1e1e1"</span></span>
<span id="cb5-56"><a href="#cb5-56" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb5-57"><a href="#cb5-57" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb5-58"><a href="#cb5-58" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb5-59"><a href="#cb5-59" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb5-60"><a href="#cb5-60" tabindex="-1"></a>    <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">"grey0"</span>),</span>
<span id="cb5-61"><a href="#cb5-61" tabindex="-1"></a>    <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#97dbf2"</span>),</span>
<span id="cb5-62"><a href="#cb5-62" tabindex="-1"></a>    <span class="at">panel.border =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"grey10"</span>),</span>
<span id="cb5-63"><a href="#cb5-63" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb5-64"><a href="#cb5-64" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(</span>
<span id="cb5-65"><a href="#cb5-65" tabindex="-1"></a>      <span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">2</span>, <span class="at">face =</span> <span class="st">"bold"</span>,</span>
<span id="cb5-66"><a href="#cb5-66" tabindex="-1"></a>      <span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">10</span>, <span class="at">t =</span> <span class="dv">5</span>), <span class="at">size =</span> <span class="dv">12</span></span>
<span id="cb5-67"><a href="#cb5-67" tabindex="-1"></a>    ),</span>
<span id="cb5-68"><a href="#cb5-68" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(</span>
<span id="cb5-69"><a href="#cb5-69" tabindex="-1"></a>      <span class="at">size =</span> <span class="dv">8</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">margin =</span></span>
<span id="cb5-70"><a href="#cb5-70" tabindex="-1"></a>        <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">4</span>, <span class="at">t =</span> <span class="dv">8</span>)</span>
<span id="cb5-71"><a href="#cb5-71" tabindex="-1"></a>    ),</span>
<span id="cb5-72"><a href="#cb5-72" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>, ),</span>
<span id="cb5-73"><a href="#cb5-73" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">7</span>),</span>
<span id="cb5-74"><a href="#cb5-74" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb5-75"><a href="#cb5-75" tabindex="-1"></a>    <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>,</span>
<span id="cb5-76"><a href="#cb5-76" tabindex="-1"></a>    <span class="at">legend.text.position =</span> <span class="st">"bottom"</span>,</span>
<span id="cb5-77"><a href="#cb5-77" tabindex="-1"></a>    <span class="at">legend.title.position =</span> <span class="st">"top"</span>,</span>
<span id="cb5-78"><a href="#cb5-78" tabindex="-1"></a>    <span class="at">legend.key.height =</span> <span class="fu">rel</span>(<span class="fl">0.5</span>),</span>
<span id="cb5-79"><a href="#cb5-79" tabindex="-1"></a>    <span class="at">legend.key.width =</span> <span class="fu">unit</span>(.<span class="dv">1</span>, <span class="st">"npc"</span>)</span>
<span id="cb5-80"><a href="#cb5-80" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb5-81"><a href="#cb5-81" tabindex="-1"></a>  <span class="co"># Annotate and labels</span></span>
<span id="cb5-82"><a href="#cb5-82" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb5-83"><a href="#cb5-83" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Disposable income of private households (2022)"</span>,</span>
<span id="cb5-84"><a href="#cb5-84" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"NUTS-2 level"</span>,</span>
<span id="cb5-85"><a href="#cb5-85" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"euros (thousands)"</span>,</span>
<span id="cb5-86"><a href="#cb5-86" tabindex="-1"></a>    <span class="at">caption =</span> <span class="fu">paste0</span>(</span>
<span id="cb5-87"><a href="#cb5-87" tabindex="-1"></a>      <span class="st">"Source: Eurostat, "</span>, <span class="fu">gisco_attributions</span>()</span>
<span id="cb5-88"><a href="#cb5-88" tabindex="-1"></a>    )</span>
<span id="cb5-89"><a href="#cb5-89" tabindex="-1"></a>  )</span></code></pre></div>
<div class="figure">
<img src="giscoR-1.png" alt="Disposable income of private households by NUTS 2 regions (2022)" width="100%"><p class="caption">
Disposable income of private households by NUTS 2 regions (2022)
</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://dieghernan.github.io/" class="external-link">Diego Hernangómez</a>. <br>Part of <a href="http://ropengov.org/" class="external-link"><img src="https://ropengov.github.io/rogtemplate/logo2020_white_orange.svg" height="20" class="d-inline-block mx-1 rog-logo" alt="rOpenGov R packages for open government data analytics"></a></p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
